<!doctype html>
<html lang="en">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="logo3.PNG">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src='skripta.js'></script>
    <title>Tržni centar "LUX"</title>
  </head>
  <body style="background-color: rgb(243, 240, 222);">
    <header class="bg-dark text-white">
      <div class="container-fluid">
        <nav class="navbar navbar-expand-lg navbar-dark">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" href="index.html">Početna</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="galerija.html">Galerija</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="radnje.html">Radnje</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="popust.html">Poklon kartice</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="anketa.html">Anketa</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="kontakt.html">Kontakt</a>
              </li>
          
          </div>
        </nav>
      </div>
    </header>
        <br>
    <h1 id="anketa">ANKETA</h1>
   
    <div id="div_pitanja"></div>
    <br>
    <a class="btn btn-warning" id="snimiOdgovore">Snimi odgovore</a>
    <br>
    <br>
    <h4 id="rezultati">REZULTATI</h4>
    <br>
    <div id="div_rezultati"></div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        var pitanja=[
            {
                id:1,
                tekstPitanja:"Koliko vam se svidja izgled naseg tržnog centra?"
            },
            {
                id:2,
                tekstPitanja:"Da li biste nas ponovo posetili?"
            },
            {
                id:3,
                tekstPitanja:"Kako bi ste ocenili ljubaynost radnika?"
            }
        ]
        var odgovori=[]
        
        function prikaziPitanja(){
            let prikaz=""
            for (let pitanje of pitanja) {
                prikaz+=`<div class="mb-3">
                    <label for="pitanje" class="form-label">${pitanje.tekstPitanja}</label>
                    <select class="form-select odgovor-pitanje" data-id="${pitanje.id}">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>`
                odgovori.push({
                    id_pitanja:pitanje.id,
                    ocene:[]
                })
            }
            $("#div_pitanja").html(prikaz)
            prikaziOdgovore()
        }
        function dohvatiTekstPitanjaZaID(id){
            for (let pitanje of pitanja) {
                if(pitanje.id==id){
                    return pitanje.tekstPitanja
                }
            }
            return ""
        }
        function odrediBojuZaProsecnuOcenu(prosecnaOcena){
            if(prosecnaOcena<2.5){
                return "bg-danger text-white"
            }else if(prosecnaOcena<3.5){
                return "bg-warning text-white"
            }else{
                return "bg-success text-white"
            }
        }
        function prosecnaOcena(niz){
            let suma=0;
            for(let ocena of niz){
                suma+=ocena
            }
            return 1.0*suma/niz.length
        }
        function prikaziOdgovore(){
            let prikaz=`
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th scope="col">R. br.</th>
                        <th scope="col">Tekst pitanja</th>
                        <th scope="col">Broj odgovora</th>
                        <th scope="col">Prosecna ocena</th>
                    </tr>
                </thead>
                <tbody>`

                for (let index in odgovori) {
                    let odgovor=odgovori[index]
                    prikaz+=`<tr class="${odrediBojuZaProsecnuOcenu(prosecnaOcena(odgovor.ocene))}">
                        <th scope="col">${parseInt(index)+1}</th>
                        <th scope="col">${dohvatiTekstPitanjaZaID(odgovor.id_pitanja)}</th>
                        <th scope="col">${odgovor.ocene.length}</th>
                        <th scope="col">${prosecnaOcena(odgovor.ocene).toFixed(2)}</th>
                    </tr>`
                }
                
                    
               prikaz+=`</tbody>
            </table>
            `
            $("#div_rezultati").html(prikaz)
        }
        
        function obradiOdgovore(){
            let trenutniOdgovori=$(".odgovor-pitanje")
            for (let odg of trenutniOdgovori) {
                for (let index in odgovori) {
                    let odgovor=odgovori[index]
                    if(odgovor.id_pitanja==odg.getAttribute("data-id")){
                        odgovor.ocene.push(parseInt(odg.value))
                    }
                }
            }
            prikaziOdgovore()
            
        }
        $(document).ready(prikaziPitanja)
        $("#snimiOdgovore").on("click",obradiOdgovore)
    </script>

<BR>
  <BR>
    <footer class="bg-dark text-white py-4">
      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <h5>O nama</h5>
            <p>Dobrodošli u tržni centar Lux, vašu destinaciju za luksuznu kupovinu i nezaboravno iskustvo. Smješten u srcu grada, Lux nudi širok spektar ekskluzivnih brendova, vrhunske usluge i najnovije modne trendove. Uživajte u šoping avanturi uz personalizirane usluge, sjajne popuste i jedinstvene događaje.;<br> Lux - mjesto gdje se stil i elegancija susreću s zadovoljstvom kupovine.</p>
          </div>
          <div class="col-md-4">
            <h5>Radno vreme</h5>
            <p>Ponedeljak - Petak: 9:00 - 22:00</p>
            <p>Vikend: 9:00 - 22:00</p>
          </div>
          <div class="col-md-4">
            <h5>Kontaktirajte nas</h5>
            <p>Adresa: Petra Škkundrića, Beograd</p>
            <p>Telefon: 011/123-456</p>
            <p>Email: info@trznicentar-lux.rs</p>
          </div>
        </div>
        <hr>
        <p class="text-center">© 2023 Tržni centar"LUX". Sva prava zadržana.</p>
      </div>
    </footer>
  
  

</body>
</html>